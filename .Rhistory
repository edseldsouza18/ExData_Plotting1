setwd(".")
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
png("plot1.png", width = 480, height = 480)
hist(data$Global_active_power,
main = "Global Active Power",
xlab = "Global Active Power (kilowatts)",
ylab = "Frequency")
dev.off()
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# --- Data Preparation for Plot 2 ---
# Convert 'Date' and 'Time' columns to a single datetime object
# First, combine them into a character string
data$DateTime <- paste(data$Date, data$Time)
# Then, convert this string to a POSIXct datetime object
data$DateTime <- strptime(data$DateTime, "%Y-%m-%d %H:%M:%S")
# Convert Global_active_power to numeric
# We'll use the 'as.numeric()' function for this.
data$Global_active_power <- as.numeric(data$Global_active_power)
# --- Create Plot 2 ---
# Open the PNG device
png("plot2.png", width = 480, height = 480)
# Plot Global Active Power against the DateTime object
plot(data$DateTime, data$Global_active_power,
type = "l",  # "l" stands for "line plot"
main = "",   # No main title requested for this plot
xlab = "",   # No x-axis label requested
ylab = "Global Active Power (kilowatts)")
# Set working directory to the project root
setwd(".")
# Read the data with proper handling of missing values
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
head(data)
table(is.na(data$Global_active_power))
# Combine Date and Time into one string
data$DateTime <- paste(data$Date, data$Time)
# Convert to POSIXct datetime object
data$DateTime <- strptime(data$DateTime, "%Y-%m-%d %H:%M:%S")
# Convert Global_active_power to numeric ---
data$Global_active_power <- as.numeric(data$Global_active_power)
summary(data$Global_active_power)
data <- data[!is.na(data$Global_active_power), ]
# --- Create Plot 2 ---
png("plot2.png", width = 480, height = 480)
plot(data$DateTime, data$Global_active_power,
type = "l",
main = "",
xlab = "",
ylab = "Global Active Power (kilowatts)")
# Set working directory to the project root
setwd(".")
# Read the data with proper handling of missing values
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",  # This is CRITICAL!
stringsAsFactors = FALSE)
# --- Check for missing data ---
# Print first few rows to verify data loaded correctly
head(data)
# Check if any values are still "NA" after reading
table(is.na(data$Global_active_power))
# Combine Date and Time into one string
data$DateTime <- paste(data$Date, data$Time)
# Convert to POSIXct datetime object
data$DateTime <- strptime(data$DateTime, "%Y-%m-%d %H:%M:%S")
# --- Now convert Global_active_power to numeric ---
# But only do this AFTER ensuring NA handling worked
data$Global_active_power <- as.numeric(data$Global_active_power)
# --- Check again: Are there any valid numbers? ---
summary(data$Global_active_power)
# --- Optional: Remove rows where Global_active_power is NA ---
# This ensures we don't plot garbage
data <- data[!is.na(data$Global_active_power), ]
png("plot2.png", width = 480, height = 480)
plot(data$DateTime, data$Global_active_power,
type = "l",
main = "",
xlab = "",
ylab = "Global Active Power (kilowatts)")
# Set working directory to the project root
setwd(".")
# Read the data with proper handling of missing values
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",  # This is CRITICAL!
stringsAsFactors = FALSE)
# --- Check for missing data ---
# Print first few rows to verify data loaded correctly
head(data)
# Check if any values are still "NA" after reading
table(is.na(data$Global_active_power))
# --- Fix the DateTime column ---
# Combine Date and Time into one string
data$DateTime <- paste(data$Date, data$Time)
# Convert to POSIXct datetime object
data$DateTime <- strptime(data$DateTime, "%Y-%m-%d %H:%M:%S")
# --- Now convert Global_active_power to numeric ---
# But only do this AFTER ensuring NA handling worked
data$Global_active_power <- as.numeric(data$Global_active_power)
# --- Check again: Are there any valid numbers? ---
summary(data$Global_active_power)
# --- Optional: Remove rows where Global_active_power is NA ---
# This ensures we don't plot garbage
data <- data[!is.na(data$Global_active_power), ]
# --- Create Plot 2 ---
png("plot2.png", width = 480, height = 480)
plot(data$DateTime, data$Global_active_power,
type = "l",
main = "",
xlab = "",
ylab = "Global Active Power (kilowatts)")
# Set working directory
setwd(".")
# Read the data with proper handling
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# --- DEBUG: Show first 5 rows ---
print("First 5 rows of data:")
head(data)
# --- DEBUG: Check for NA in Global_active_power ---
print("Number of NA values in Global_active_power:")
table(is.na(data$Global_active_power))
# --- DEBUG: Check the actual values ---
print("First 5 values of Global_active_power (as character):")
print(head(data$Global_active_power))
# --- DEBUG: Are they actually numbers? ---
print("Are these numeric?")
is.numeric(data$Global_active_power)
# --- DEBUG: Check Date/Time format ---
print("First 5 Date and Time values:")
print(head(data$Date))
print(head(data$Time))
# --- Now combine DateTime ---
data$DateTime <- paste(data$Date, data$Time)
# Check if DateTime is valid
print("First 5 DateTime values (after paste):")
print(head(data$DateTime))
# Try converting to POSIXct
data$DateTime <- strptime(data$DateTime, "%Y-%m-%d %H:%M:%S")
# Check result
print("First 5 DateTime after conversion:")
print(head(data$DateTime))
# --- Final check: Is Global_active_power numeric? ---
data$Global_active_power <- as.numeric(data$Global_active_power)
print("After as.numeric(), are there any non-NA values?")
summary(data$Global_active_power)
# --- Now plot only if data exists ---
if (any(!is.na(data$Global_active_power)) && length(data$DateTime) > 0) {
png("plot2.png", width = 480, height = 480)
plot(data$DateTime, data$Global_active_power,
type = "l",
main = "",
xlab = "",
ylab = "Global Active Power (kilowatts)")
dev.off()
print("✅ Plot saved as plot2.png")
} else {
print("❌ ERROR: No valid data found for plotting.")
print("Check the data file again — likely corrupted or misencoded.")
}
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# Combine Date and Time into a single datetime column
data$DateTime <- paste(data$Date, data$Time)
# Convert to POSIXct with correct format: DD/MM/YYYY HH:MM:SS
data$DateTime <- strptime(data$DateTime, "%d/%m/%Y %H:%M:%S")
# Convert Global_active_power to numeric
data$Global_active_power <- as.numeric(data$Global_active_power)
# Create the line plot
png("plot2.png", width = 480, height = 480)
plot(data$DateTime, data$Global_active_power,
type = "l",
main = "",
xlab = "",
ylab = "Global Active Power (kilowatts)")
dev.off()
print("✅ plot2.png has been saved successfully.")
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# Convert Global_active_power to numeric
data$Global_active_power <- as.numeric(data$Global_active_power)
# Create the histogram
png("plot1.png", width = 480, height = 480)
hist(data$Global_active_power,
main = "Global Active Power",
xlab = "Global Active Power (kilowatts)",
ylab = "Frequency",
col = "red")
dev.off()
print("✅ plot1.png has been saved successfully.")
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# Convert Global_active_power to numeric
data$Global_active_power <- as.numeric(data$Global_active_power)
# Create DateTime column and parse using DD/MM/YYYY format
data$DateTime <- strptime(paste(data$Date, data$Time), "%d/%m/%Y %H:%M:%S")
# Subset to the relevant two-day period used in the assignment sample (2007-02-01 and 2007-02-02)
start <- as.POSIXct("2007-02-01 00:00:00", tz = "")
end   <- as.POSIXct("2007-02-02 23:59:59", tz = "")
# Ensure DateTime is POSIXct for easy comparisons
data$DateTime_ct <- as.POSIXct(data$DateTime)
sub <- subset(data, !is.na(DateTime_ct) & DateTime_ct >= start & DateTime_ct <= end)
# compute axis tick positions at the start of each day in the range
days <- seq(as.POSIXct("2007-02-01", tz = ""), as.POSIXct("2007-02-03", tz = ""), by = "day")
# Create the plot
png("plot2.png", width = 480, height = 480)
# Plot without x-axis (xaxt="n") so we can add custom weekday ticks like the sample
plot(sub$DateTime_ct, sub$Global_active_power,
type = "l",
xlab = "",
ylab = "Global Active Power (kilowatts)",
xaxt = "n",
col = "black")
# Add custom x-axis ticks and labels (weekdays)
axis(1, at = days, labels = format(days, "%a"))
dev.off()
cat("✅ plot2.png saved.\n")
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# Convert relevant columns to numeric
data$Global_active_power <- as.numeric(data$Global_active_power)
data$Sub_metering_1 <- as.numeric(data$Sub_metering_1)
data$Sub_metering_2 <- as.numeric(data$Sub_metering_2)
data$Sub_metering_3 <- as.numeric(data$Sub_metering_3)
# Create DateTime column and parse using DD/MM/YYYY format
data$DateTime <- strptime(paste(data$Date, data$Time), "%d/%m/%Y %H:%M:%S")
# Subset to the relevant two-day period for consistency with plot2 (Thu, Fri, Sat)
start <- as.POSIXct("2007-02-01", tz = "")
end   <- as.POSIXct("2007-02-03", tz = "")
data$DateTime_ct <- as.POSIXct(data$DateTime)
sub <- subset(data, !is.na(DateTime_ct) & DateTime_ct >= start & DateTime_ct < end)
# Define axis tick positions for weekdays
days <- seq(as.POSIXct("2007-02-01", tz = ""), as.POSIXct("2007-02-03", tz = ""), by = "day")
# Create the plot
png("plot3.png", width = 480, height = 480)
# Plot the first sub-metering (black)
plot(sub$DateTime_ct, sub$Sub_metering_1,
type = "l",
xlab = "",
ylab = "Energy sub metering",
col = "black",
xaxt = "n") # Hide default x-axis to add custom one later
# Add the second sub-metering (red)
lines(sub$DateTime_ct, sub$Sub_metering_2, col = "red")
# Add the third sub-metering (blue)
lines(sub$DateTime_ct, sub$Sub_metering_3, col = "blue")
# Add custom x-axis ticks and labels
axis(1, at = days, labels = format(days, "%a"))
# Add the legend
legend("topright",
legend = c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"),
col = c("black", "red", "blue"),
lty = 1, # Line type 1 is solid
cex = 0.8) # Adjust legend text size if needed
dev.off()
cat("✅ plot3.png saved.\n")
# Set working directory to the project root
setwd(".")
# Read the data
data <- read.table("data/household_power_consumption.txt",
header = TRUE,
sep = ";",
na.strings = "?",
stringsAsFactors = FALSE)
# Convert relevant columns to numeric
data$Global_active_power <- as.numeric(data$Global_active_power)
data$Global_reactive_power <- as.numeric(data$Global_reactive_power)
data$Voltage <- as.numeric(data$Voltage)
data$Sub_metering_1 <- as.numeric(data$Sub_metering_1)
data$Sub_metering_2 <- as.numeric(data$Sub_metering_2)
data$Sub_metering_3 <- as.numeric(data$Sub_metering_3)
# Parse DateTime (DD/MM/YYYY HH:MM:SS)
data$DateTime <- strptime(paste(data$Date, data$Time), "%d/%m/%Y %H:%M:%S")
data$DateTime_ct <- as.POSIXct(data$DateTime)
# Subset to 2007-02-01 and 2007-02-02 (inclusive)
start <- as.POSIXct("2007-02-01 00:00:00", tz = "")
end   <- as.POSIXct("2007-02-02 23:59:59", tz = "")
sub <- subset(data, !is.na(DateTime_ct) & DateTime_ct >= start & DateTime_ct <= end)
# Define axis tick positions for weekdays (start of days)
days <- seq(as.POSIXct("2007-02-01", tz = ""), as.POSIXct("2007-02-03", tz = ""), by = "day")
# Create the 2x2 plot and save to PNG
png("plot4.png", width = 480, height = 480)
# 2 rows, 2 columns
par(mfrow = c(2, 2), mar = c(4, 4, 2, 1)) # adjust margins if needed
# Top-left: Global Active Power
plot(sub$DateTime_ct, sub$Global_active_power,
type = "l",
xlab = "",
ylab = "Global Active Power",
xaxt = "n")
axis(1, at = days, labels = format(days, "%a"))
# Top-right: Voltage
plot(sub$DateTime_ct, sub$Voltage,
type = "l",
xlab = "datetime",
ylab = "Voltage",
xaxt = "n")
axis(1, at = days, labels = format(days, "%a"))
# Bottom-left: Energy sub metering (three lines)
plot(sub$DateTime_ct, sub$Sub_metering_1,
type = "l",
xlab = "",
ylab = "Energy sub metering",
col = "black",
xaxt = "n")
lines(sub$DateTime_ct, sub$Sub_metering_2, col = "red")
lines(sub$DateTime_ct, sub$Sub_metering_3, col = "blue")
axis(1, at = days, labels = format(days, "%a"))
legend("topright",
legend = c("Sub_metering_1", "Sub_metering_2", "Sub_metering_3"),
col = c("black", "red", "blue"),
lty = 1,
bty = "n",
cex = 0.9)
# Bottom-right: Global Reactive Power
plot(sub$DateTime_ct, sub$Global_reactive_power,
type = "l",
xlab = "datetime",
ylab = "Global_reactive_power",
xaxt = "n")
axis(1, at = days, labels = format(days, "%a"))
dev.off()
cat("✅ plot4.png saved.\n")
